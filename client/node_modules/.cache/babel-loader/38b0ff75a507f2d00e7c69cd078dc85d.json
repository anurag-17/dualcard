{"ast":null,"code":"import axios from \"axios\";\nimport { CLEAR_ERRORS, DETAIL_USER_FAIL, DETAIL_USER_REQUEST, DETAIL_USER_SUCCESS, LOGIN_FAIL, LOGIN_REQUEST, LOGIN_SUCCESS, LOGOUT_USER_FAIL, LOGOUT_USER_SUCCESS, REGISTER_USER_FAIL, REGISTER_USER_REQUEST, REGISTER_USER_SUCCESS, UPDATE_PASSWORD_FAIL, UPDATE_PASSWORD_REQUEST, UPDATE_PASSWORD_SUCCESS, UPDATE_PROFIE_REQUEST, UPDATE_PROFIE_SUCCESS } from \"../constants/userConstants\";\nimport { useNavigate } from \"react-router-dom\";\nexport const login = userdata => async (dispatch, getState) => {\n  console.log(email, password);\n\n  try {\n    dispatch({\n      type: LOGIN_REQUEST\n    });\n    const {\n      data\n    } = await axios.post(`http://localhost:5000/api/auth/login`, {\n      email,\n      password\n    });\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: data.user\n    });\n    console.log(data);\n  } catch (error) {\n    dispatch({\n      type: LOGIN_FAIL,\n      payload: error.response.data\n    });\n    console.log(error.response);\n  }\n};\nexport const register = userData => async dispatch => {\n  try {\n    dispatch({\n      type: REGISTER_USER_REQUEST\n    }); // const config = { headers: { \"Content-Type\": \"Application/json\" } };\n\n    const {\n      data\n    } = await axios.post(`http://localhost:5000/api/auth/register`, userData);\n    dispatch({\n      type: REGISTER_USER_SUCCESS,\n      payload: data.user\n    });\n    console.log(data);\n  } catch (error) {\n    dispatch({\n      type: REGISTER_USER_FAIL,\n      payload: error.response.data\n    }); // console.log(error);\n  }\n};\nexport const logout = () => async dispatch => {\n  try {\n    await axios.get(`/api/auth/logout`);\n    dispatch({\n      type: LOGOUT_USER_SUCCESS\n    });\n  } catch (error) {\n    dispatch({\n      type: LOGOUT_USER_FAIL,\n      payload: error.response.data.message\n    });\n  }\n}; //////////////////loaduser////////////////\n\nexport const loaduser = () => async dispatch => {\n  try {\n    dispatch({\n      type: DETAIL_USER_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(`/api/auth/me`);\n    dispatch({\n      type: DETAIL_USER_SUCCESS,\n      payload: data.user\n    });\n    console.log(data.user);\n  } catch (error) {\n    dispatch({\n      type: DETAIL_USER_FAIL\n    });\n  }\n};\nexport const updatePassword = password => async dispatch => {\n  try {\n    dispatch({\n      type: UPDATE_PASSWORD_REQUEST\n    });\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const data = await axios.put(`/api/auth/update/password`, password, config);\n    dispatch({\n      type: UPDATE_PASSWORD_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    dispatch({\n      type: UPDATE_PASSWORD_FAIL,\n      payload: error.response.data.message\n    });\n  }\n};\nexport const updateprofile = updatedata => async dispatch => {\n  try {\n    dispatch({\n      type: UPDATE_PROFIE_REQUEST\n    });\n    const config = {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    }; // const data = await axios.put(\n\n    const data = await axios.put(`/api/auth/update/profile`, updatedata, config);\n    console.log(updatedata);\n    dispatch({\n      type: UPDATE_PROFIE_SUCCESS,\n      payload: data.success\n    });\n  } catch (error) {\n    dispatch({\n      type: UPDATE_PASSWORD_FAIL,\n      payload: error.response.data\n    });\n  }\n}; //////////////////loaduser////////////////\n//clearing errors\n\nexport const clearErrors = () => async dispatch => {\n  dispatch({\n    type: CLEAR_ERRORS\n  });\n};","map":{"version":3,"names":["axios","CLEAR_ERRORS","DETAIL_USER_FAIL","DETAIL_USER_REQUEST","DETAIL_USER_SUCCESS","LOGIN_FAIL","LOGIN_REQUEST","LOGIN_SUCCESS","LOGOUT_USER_FAIL","LOGOUT_USER_SUCCESS","REGISTER_USER_FAIL","REGISTER_USER_REQUEST","REGISTER_USER_SUCCESS","UPDATE_PASSWORD_FAIL","UPDATE_PASSWORD_REQUEST","UPDATE_PASSWORD_SUCCESS","UPDATE_PROFIE_REQUEST","UPDATE_PROFIE_SUCCESS","useNavigate","login","userdata","dispatch","getState","console","log","email","password","type","data","post","payload","user","error","response","register","userData","logout","get","message","loaduser","updatePassword","config","headers","put","success","updateprofile","updatedata","clearErrors"],"sources":["D:/Duel-card/client/src/actions/userAction.js"],"sourcesContent":["import axios from \"axios\";\r\nimport {\r\n  CLEAR_ERRORS,\r\n  DETAIL_USER_FAIL,\r\n  DETAIL_USER_REQUEST,\r\n  DETAIL_USER_SUCCESS,\r\n  LOGIN_FAIL,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGOUT_USER_FAIL,\r\n  LOGOUT_USER_SUCCESS,\r\n  REGISTER_USER_FAIL,\r\n  REGISTER_USER_REQUEST,\r\n  REGISTER_USER_SUCCESS,\r\n  UPDATE_PASSWORD_FAIL,\r\n  UPDATE_PASSWORD_REQUEST,\r\n  UPDATE_PASSWORD_SUCCESS,\r\n  UPDATE_PROFIE_REQUEST,\r\n  UPDATE_PROFIE_SUCCESS,\r\n} from \"../constants/userConstants\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n\r\nexport const login = (userdata) => async (dispatch, getState) => {\r\n  console.log(email, password);\r\n  try {\r\n    dispatch({ type: LOGIN_REQUEST });\r\n    const { data } = await axios.post(`http://localhost:5000/api/auth/login`,{email,password});\r\n\r\n    dispatch({ type:LOGIN_SUCCESS, payload: data.user});\r\n    console.log(data);\r\n  } catch (error) {\r\n    dispatch({ type: LOGIN_FAIL, payload: error.response.data });\r\n\r\n    console.log(error.response);\r\n  }\r\n  \r\n};\r\n\r\nexport const register = (userData) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: REGISTER_USER_REQUEST });\r\n\r\n    // const config = { headers: { \"Content-Type\": \"Application/json\" } };\r\n\r\n    const { data } = await axios.post(`http://localhost:5000/api/auth/register`,userData);\r\n        \r\n  \r\n    dispatch({ type: REGISTER_USER_SUCCESS, payload: data.user });\r\n    console.log(data);\r\n  } catch (error) {\r\n    dispatch({\r\n      type: REGISTER_USER_FAIL,\r\n      payload: error.response.data,\r\n    });\r\n    // console.log(error);\r\n  }\r\n};\r\nexport const logout = () => async (dispatch) => {\r\n  try {\r\n    await axios.get(`/api/auth/logout`);\r\n\r\n    dispatch({ type: LOGOUT_USER_SUCCESS });\r\n  } catch (error) {\r\n    dispatch({ type: LOGOUT_USER_FAIL, payload: error.response.data.message });\r\n  }\r\n};\r\n//////////////////loaduser////////////////\r\nexport const loaduser = () => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: DETAIL_USER_REQUEST });\r\n    const { data } = await axios.get(`/api/auth/me`);\r\n\r\n    dispatch({ type: DETAIL_USER_SUCCESS, payload: data.user });\r\n\r\n    console.log(data.user);\r\n  } catch (error) {\r\n    dispatch({ type: DETAIL_USER_FAIL });\r\n  }\r\n};\r\nexport const updatePassword = (password) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: UPDATE_PASSWORD_REQUEST });\r\n\r\n    const config = { headers: { \"Content-Type\": \"application/json\" } };\r\n\r\n    const data = await axios.put(`/api/auth/update/password`, password, config);\r\n\r\n    dispatch({ type: UPDATE_PASSWORD_SUCCESS, payload: data.success });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: UPDATE_PASSWORD_FAIL,\r\n      payload: error.response.data.message,\r\n    });\r\n  }\r\n};\r\nexport const updateprofile = (updatedata) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: UPDATE_PROFIE_REQUEST });\r\n    const config = { headers: { \"Content-Type\": \"multipart/form-data\" } };  // const data = await axios.put(\r\n      const data = await axios.put(\r\n      `/api/auth/update/profile`,\r\n      updatedata,\r\n      config\r\n    );\r\n    console.log(updatedata);\r\n    dispatch({ type: UPDATE_PROFIE_SUCCESS, payload: data.success });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: UPDATE_PASSWORD_FAIL,\r\n      payload: error.response.data,\r\n    });\r\n  }\r\n};\r\n//////////////////loaduser////////////////\r\n\r\n//clearing errors\r\nexport const clearErrors = () => async (dispatch) => {\r\n  dispatch({ type: CLEAR_ERRORS });\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}